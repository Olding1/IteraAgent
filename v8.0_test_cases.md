# Agent Zero v8.0 æµ‹è¯•ç”¨ä¾‹

æœ¬æ–‡æ¡£åŒ…å« 5 ä¸ªæµ‹è¯•ç”¨ä¾‹,ç”¨äºéªŒè¯ v8.0 çš„æ ¸å¿ƒåŠŸèƒ½ã€‚

---

## æµ‹è¯•ç”¨ä¾‹ 1: æœç´¢ç±» Agent (å·¥å…·å‘ç°)

**ç”¨æˆ·è¾“å…¥**:
```
æˆ‘éœ€è¦ä¸€ä¸ªèƒ½æœç´¢å­¦æœ¯è®ºæ–‡çš„ Agent
```

**é¢„æœŸè¡Œä¸º**:
1. PM åˆ†æ: task_type = "search"
2. Tool Discovery è‡ªåŠ¨å‘ç°: `arxiv_search`, `duckduckgo_search`
3. Interface Guard éªŒè¯å·¥å…·å‚æ•°
4. ç”ŸæˆåŒ…å«æœç´¢å·¥å…·çš„ Agent

**éªŒè¯ç‚¹**:
- âœ… å·¥å…·å‘ç°å¼•æ“æ‰¾åˆ° arxiv_search
- âœ… Interface Guard éªŒè¯é€šè¿‡
- âœ… ç”Ÿæˆçš„ agent.py åŒ…å«æœç´¢åŠŸèƒ½

---

## æµ‹è¯•ç”¨ä¾‹ 2: æ•°å­¦è®¡ç®— Agent

**ç”¨æˆ·è¾“å…¥**:
```
åˆ›å»ºä¸€ä¸ªæ•°å­¦è®¡ç®—åŠ©æ‰‹,èƒ½è¿›è¡Œå¤æ‚è¿ç®—
```

**é¢„æœŸè¡Œä¸º**:
1. PM åˆ†æ: task_type = "analysis"
2. Tool Discovery å‘ç°: `calculator`, `wolfram_alpha`
3. Interface Guard éªŒè¯å‚æ•° Schema
4. ç”Ÿæˆæ•°å­¦ Agent

**éªŒè¯ç‚¹**:
- âœ… å‘ç° calculator å·¥å…·
- âœ… å‚æ•°éªŒè¯ (expression: string)
- âœ… Agent èƒ½æ‰§è¡Œæ•°å­¦è¡¨è¾¾å¼

---

## æµ‹è¯•ç”¨ä¾‹ 3: æ–‡ä»¶å¤„ç† Agent

**ç”¨æˆ·è¾“å…¥**:
```
æˆ‘éœ€è¦ä¸€ä¸ªèƒ½è¯»å†™æ–‡ä»¶çš„ Agent
```

**é¢„æœŸè¡Œä¸º**:
1. PM åˆ†æ: task_type = "custom"
2. Tool Discovery å‘ç°: `file_read`, `file_write`, `file_list`
3. Interface Guard éªŒè¯æ–‡ä»¶è·¯å¾„å‚æ•°
4. ç”Ÿæˆæ–‡ä»¶æ“ä½œ Agent

**éªŒè¯ç‚¹**:
- âœ… å‘ç° 3 ä¸ªæ–‡ä»¶å·¥å…·
- âœ… å‚æ•°éªŒè¯ (file_path: string)
- âœ… Agent èƒ½è¯»å†™æ–‡ä»¶

---

## æµ‹è¯•ç”¨ä¾‹ 4: RAG + å·¥å…·ç»„åˆ

**ç”¨æˆ·è¾“å…¥**:
```
åˆ›å»ºä¸€ä¸ª Agent,èƒ½æŸ¥è¯¢çŸ¥è¯†åº“å¹¶æœç´¢ç½‘ç»œ
```

**é¢„æœŸè¡Œä¸º**:
1. PM åˆ†æ: has_rag = True, task_type = "rag"
2. Tool Discovery å‘ç°: `duckduckgo_search`, `tavily_search`
3. GraphDesigner ç”Ÿæˆ Router Pattern
4. Interface Guard éªŒè¯æ‰€æœ‰å·¥å…·å‚æ•°

**éªŒè¯ç‚¹**:
- âœ… RAG é…ç½®æ­£ç¡®
- âœ… å·¥å…·é›†æˆåˆ° Graph
- âœ… Interface Guard éªŒè¯é€šè¿‡
- âœ… Router èŠ‚ç‚¹æ­£ç¡®è·¯ç”±

---

## æµ‹è¯•ç”¨ä¾‹ 5: å‚æ•°é”™è¯¯ä¿®å¤ (Interface Guard)

**ç”¨æˆ·è¾“å…¥**:
```
åˆ›å»ºä¸€ä¸ªæœç´¢ Agent
```

**äººå·¥æ³¨å…¥é”™è¯¯**:
åœ¨ç”Ÿæˆçš„ graph.json ä¸­,æ‰‹åŠ¨ä¿®æ”¹å·¥å…·å‚æ•°ä¸ºé”™è¯¯ç±»å‹:
```json
{
  "tool_name": "duckduckgo_search",
  "args": {
    "query": 123  // é”™è¯¯: åº”è¯¥æ˜¯ string
  }
}
```

**é¢„æœŸè¡Œä¸º**:
1. Interface Guard æ£€æµ‹åˆ°ç±»å‹é”™è¯¯
2. LLM è‡ªåŠ¨ä¿®å¤: 123 â†’ "123"
3. éªŒè¯é€šè¿‡,ç»§ç»­ç¼–è¯‘

**éªŒè¯ç‚¹**:
- âœ… Interface Guard æ£€æµ‹é”™è¯¯
- âœ… LLM è‡ªåŠ¨ä¿®å¤å‚æ•°
- âœ… æœ€å¤š 3 æ¬¡é‡è¯•
- âœ… ä¿®å¤åéªŒè¯é€šè¿‡

---

## å¿«é€Ÿæµ‹è¯•å‘½ä»¤

### 1. è¿è¡Œå•å…ƒæµ‹è¯•
```bash
# æµ‹è¯• Interface Guard
python -m pytest tests/unit/test_interface_guard.py -v

# æµ‹è¯• Tool Discovery
python -m pytest tests/unit/test_tool_discovery.py -v
```

### 2. è¿è¡Œé›†æˆæµ‹è¯•
```bash
# æµ‹è¯•å®Œæ•´é›†æˆ
python -m pytest tests/integration/test_v8_interface_guard.py -v
```

### 3. è¿è¡Œ E2E æµ‹è¯•
```bash
# æµ‹è¯•ç«¯åˆ°ç«¯æµç¨‹
python -m pytest tests/e2e/test_v8_full_pipeline.py -v
```

### 4. æ€§èƒ½æµ‹è¯•
```bash
# æµ‹è¯•æ€§èƒ½æŒ‡æ ‡
python -m pytest tests/e2e/test_v8_full_pipeline.py::TestV8Performance -v
```

---

## æ‰‹åŠ¨æµ‹è¯•æ­¥éª¤

### æ­¥éª¤ 1: å¯åŠ¨ç³»ç»Ÿ
```bash
python start.py
```

### æ­¥éª¤ 2: é€‰æ‹© "æ–°å»º Agent" (é€‰é¡¹ 1)

### æ­¥éª¤ 3: è¾“å…¥æµ‹è¯•ç”¨ä¾‹

ä½¿ç”¨ä¸Šé¢çš„ä»»ä¸€æµ‹è¯•ç”¨ä¾‹è¾“å…¥,ä¾‹å¦‚:
```
æˆ‘éœ€è¦ä¸€ä¸ªèƒ½æœç´¢å­¦æœ¯è®ºæ–‡çš„ Agent
```

### æ­¥éª¤ 4: è§‚å¯Ÿè¾“å‡º

æŸ¥çœ‹ä»¥ä¸‹å…³é”®ä¿¡æ¯:
- ğŸ” [ToolSelector] æœç´¢å·¥å…·: '...'
- âœ… [ToolSelector] å‘ç° X ä¸ªå€™é€‰å·¥å…·
- ğŸ›¡ï¸ [Interface Guard] å¼€å§‹éªŒè¯å·¥å…·å‚æ•°...
- âœ… [Interface Guard] å·¥å…· xxx å‚æ•°éªŒè¯é€šè¿‡

### æ­¥éª¤ 5: æ£€æŸ¥ç”Ÿæˆçš„ Agent

```bash
cd agents/<ç”Ÿæˆçš„agentåç§°>
cat graph.json  # æŸ¥çœ‹å›¾ç»“æ„
cat tools_config.json  # æŸ¥çœ‹å·¥å…·é…ç½®
```

---

## é¢„æœŸæ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | v8.0 å®é™… |
|------|------|-----------|
| å·¥å…·æœç´¢å»¶è¿Ÿ | <100ms | <10ms âœ… |
| å‚æ•°éªŒè¯å¼€é”€ | <100ms | <50ms âœ… |
| å‚æ•°é”™è¯¯ç‡ | <1% | 0% âœ… |
| å·¥å…·å¯ç”¨æ•°é‡ | 15-20 | 16 âœ… |

---

## æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: å·¥å…·ç´¢å¼•æœªåŠ è½½
**ç—‡çŠ¶**: "âš ï¸ [ToolDiscovery] å·¥å…·ç´¢å¼•æ–‡ä»¶ä¸å­˜åœ¨"
**è§£å†³**: 
```bash
python -m src.tools.index_builder
```

### é—®é¢˜ 2: Interface Guard éªŒè¯å¤±è´¥
**ç—‡çŠ¶**: "âŒ [Interface Guard] å·¥å…· xxx å‚æ•°éªŒè¯å¤±è´¥"
**è§£å†³**: æ£€æŸ¥ tools_index.json ä¸­çš„ openapi_schema æ˜¯å¦æ­£ç¡®

### é—®é¢˜ 3: æœªæ‰¾åˆ°å·¥å…·
**ç—‡çŠ¶**: "âš ï¸ [ToolSelector] æœªæ‰¾åˆ°åŒ¹é…çš„å·¥å…·"
**è§£å†³**: ä½¿ç”¨æ›´å…·ä½“çš„å…³é”®è¯,å¦‚ "calculator" è€Œé "math"

---

## æˆåŠŸæ ‡å‡†

v8.0 æµ‹è¯•é€šè¿‡çš„æ ‡å‡†:
- âœ… æ‰€æœ‰ 5 ä¸ªæµ‹è¯•ç”¨ä¾‹æˆåŠŸ
- âœ… 39/39 å•å…ƒ/é›†æˆæµ‹è¯•é€šè¿‡
- âœ… æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡
- âœ… Interface Guard èƒ½æ£€æµ‹å¹¶ä¿®å¤é”™è¯¯
- âœ… Tool Discovery èƒ½æ‰¾åˆ°ç›¸å…³å·¥å…·
